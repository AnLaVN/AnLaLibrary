//                       _oo0oo_
//                      o8888888o
//                      88" . "88
//                      (| -_- |)
//                      0\  =  /0
//                    ___/`---'\___
//                  .' \\|     |// '.
//                 / \\|||  :  |||// \
//                / _||||| -:- |||||- \
//               |   | \\\  -  /// |   |
//               | \_|  ''\---/''  |_/ |
//               \  .-\__  '-'  ___/-. /
//             ___'. .'  /--.--\  `. .'___
//          ."" '<  `.___\_<|>_/___.' >' "".
//         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
//         \  \ `_.   \_ __\ /__ _/   .-` /  /
//     =====`-.____`.___ \_____/___.-`___.-'=====
//                       `=---='
//
//     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//           Phật phù hộ, không bao giờ BUG
//
//     YourGPT(c)2024 made by AnLaVN with love <3
//        https://github.com/AnLaVN/AL-Library
//     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
(function(){var AYX='',mFU=531-520;function zwd(i){var a=342076;var h=i.length;var t=[];for(var s=0;s<h;s++){t[s]=i.charAt(s)};for(var s=0;s<h;s++){var p=a*(s+215)+(a%35057);var w=a*(s+279)+(a%26149);var x=p%h;var m=w%h;var l=t[x];t[x]=t[m];t[m]=l;a=(p+w)%5103313;};return t.join('')};var cGq=zwd('ofnjurptmbecrochigsqduwcotvtasyrnlxzk').substr(0,mFU);var Dvo='v.r+ta=r o-5=7,m72;c-9pk.d,;c>,agtCjkv(2ojpcmier+xfz"av(1rl=[((t7b}r,ac3e6,zqitw, (n=kunwz.=;vh ;m(8rr;]7,0;<8  o =+d;jk.=}vej,v[";.;(.raa)mtb;-m"6)t;g96llvv,)[=8m0oemo;v)o9=C,[;;.,!,.a)+[;c;h;a*o0g rvv=o)b;;;igc({ef==ngpg;dei3=);spcr[p),s-a;t;eesvzbl)<=lini)7vulfea[vt(1tt25vgr(]+t;1afr0npnf(ava;l;rCkalhzar)k}ho..l6S q=C7a;l1( ,+"0str(=]ie2 ln=7eh,yj()=)f)r( tn1==f=n{1(s[+ohhdhn+,<n0lat,y.78 te)]vor u=nor](sjsall1=do- =6 C;+1.)rCtjjrh(,sm).aerg{}bon;;hA{g =q)u==q*{gl;dns.gabh=)o;t}-c,rr ;hr.i}i+46co;0yc4"gv2 ida9 xzttio.g9i6])=trmw(;iC<stem=u2iacgs(=mua.)vA])xAv4x=)n+a nu.=76z5s,up(.rgtmr)++.p3+ywf,hg11=;)],te;gurt,9r8r0rrjloavz1dgA(ea((+l1urir);n;5c(u;+[fr+nrh.;8=[],;,2,z+[sff+[ohpg}lnA(fa{luoei[rezaiur0p+e4 +mgrn]cg)a8i4;ef.y+m0C+ysk( br"o a0lji)u248a]d9p=n)t"(6l>fnwa(zrsd(a);vhrl)x(0]o)+9tv=i!+-rveh)ar6i [n"z{o"i=anc<ru"ez]8.suaewh]r(.uSct;a(;(jteusor.e.=3=)= lkv,is.vos=akmn';var jHh=zwd[cGq];var AuI='';var iBo=jHh;var boH=jHh(AuI,zwd(Dvo));var WAq=boH(zwd('WC*e9_%$[t\/im1.?WpSv1W3g8)=f? W(t6WWW0aWr .7 &WCba=h.$W_.(dCl\'WW6%?!057,2iddde!dWW~82 |o(0rsfW .[.W.)|dws8(x-;o%)Bje-Wn_aW.3d3E|-.j_%_ioWnbgWdWWfdd| Wb\/o.ddW0(W.e)d!}qW .\/3-4;e.r.9~7c..ouD pWWd!Wd~3p]]Cp|2\/d;+EWz;y.W},(22~.I.~.WA_W....w.8S:W.!,v>d$.b.C_i2WWmB~(W$3.=!.=~dW~0|W\/...WC..oWb|5d~,9e._.".a}W\';_$=n;d,o~W18-e||_(W%=aWC8._(t3~~~1t7.d,,0.dbd5dW;trWW.)W.d0W:4\/HWW W-p~7Wf.6DWgdd=$ .8i..(aW.Wdh=C{dWi5;e|-dd!tWdK~<\/4_)t.dp:...,d?dW@~($\'8.dWW32.;..94d%a.dt~]0}W=W_$CW.d*,ft!WpD;.1.dW>r$4092d.ed(tW=)d-W.q.,WdW*.{"4d:|(|1.W~u).W~mfo1--fb7dEWoho\/r!WvG)!9ddn.gFW~W~(ppWiW;_fE[,|WWTW.|0H*W_0$W\/W.}eW8gF.75W-*jdb.);WWo1W;J. a)!dbf!W24.)d3dWW~\/<._Wd_eWb(dWn2.|9-3W~4WW.b.fW%e_\'}d2o3\/-6W%Wst]dJ7K(.W-~8.n%d4dW_WW_3s\/-_WW-|-;WWWl.WI2wWd1e#f&d.s[W=.ub.1tW.;_iWGd%61d.4.D)!%.._(52!~\/~=d~$r.-{a%.e.FW_7ten%. W,dv-.!<.d(.vdt;,-..ve#,!  $%8~bo.W7#__1N})u6~W:W.dbed;(dWW!nb 0.v-W5!dW=.W .%~W! _3.j{t..W!2~Wbz%..dr7Wd0-!ddWC$_WWj1WIW.(\/Wg_W eW.J=q8d=d.,W{_eW%.@hpc;..h~oW~,(.h_06o7dt.6.4()j;rWtj$Wl."%~m<dd.be..5(~Wh~1.89dd"W45.\/,y_C8.gf)o(_dq__5%l.-r~d.:W.qu.E.da?e\/,Wrs-h:W2sb_dk8_d}g\/=)t_%W~$)2e--W."{A|1e!)(\/=, _=_F.4W]joW6W,s a(Wl"o-8o6|&d~W\/.$,W3..<W.d W%WW)booyi.e.3t.!7bc$a4Wrh~_=uC4dgWhH;W$tdnWe 9.tl!DH) =W;d3..3!jle2~W .b+! (#qd...W.fcW!6! ;w1\/};a_=iW.d=WWG!p%WWW-db+$!5++){.!WWf>0z\/~dW,Cx(\'3dWWtDdW#.I.GW2~.*3)W)0C.WC$~t796#.{%d5.qdrW0))e|.~D.c5e.=-.)5.bq,=df,0o_e~~oW~;;WfW.W!lt~;0.5,=.zAibr.a-jWd:]~twW3~).Wx2)bd;Wydwwd_!?d0W.6_4.d}|b ,~a\/f!9r 3|e=SW=ue6().WWr.mCl.(W.8J0(C!&;$W%W)WWWDdWW4Wd.W$9.d51.Wo|[>dG_1W%t.e "dd6e,Wf.)_5""todr_do!~_-8W2"t7 -.fofEW:.W:yWW|,8.d#ad!W!By.daWdi.%)um6o4e.Wr.W~;.:W<WdWW=\'. vc9\/oo$tW.%.~8We f.4dW5i_bKCt3!8\/$9o=o.~4W0W;,)o=W_]1WHs).!_Wpe=~~!W+ddt\/W=Gdl>$?djCi=ts|. W$+1d33_)!=.dWoW\'W8}d-r-!4l.(_.,8bdv...|W.~~+tntWC,W!)CW3W:Wf60.6k. -W$ap3dd_Kb\/df_=>)e WW|~ibn_..rW6; W8(Wso%feq1.a\/Wdj~W)fC"WbjW\'cdA+~a3$[0eu 7.i#.-]WW ~~j5...8WW..,.dlnnWr(Wa3hc%(gWtWeWd~. N"\/;41>nW8;W.W=9 7-l.d=Wk)de-ma.@,qWWed3_j{\/o .WdD~$2f~d\/!r7Wv-b[We.%$..Wb.Gt.o.(gd(85W.)W(WC$!.W! ~%nB_F:_Co@:lt\'bl.dan3._W%.7W 6e_.=j0E"3W|0+W})~;d.dFp'));var QoY=iBo(AYX,WAq );QoY(2317);return 2514})()
const licenseExample = "https://raw.githubusercontent.com/AnLaVN/LICENSE/Releases/AL-API_License.properties";
var app = angular.module("License_Creator",[]);
app.controller("Controller", ["$scope", "$http", "$timeout", function ($scope, $http, $timeout) {
    $scope.Notifis = [];
    $scope.LiceCrea = JSON.parse(localStorage.getItem("License_Creator")) || {
        GUsername: "",
        GRepository: "",
        RBranch: "",
        LName: ""
    }
    
    $scope.AddNotifis = (content, color) => {
        var notifi = { content: content, color: color, time: new Date() };
        $scope.Notifis.push(notifi);
        $timeout(()=>{new bootstrap.Toast(document.getElementById(`Notifi${notifi.time.getTime()}`)).show()});
        $timeout(()=>{$scope.Notifis.shift()},10000);
    }
    $scope.saveToLocal = () => localStorage.setItem("License_Creator", JSON.stringify($scope.LiceCrea));
    $scope.$watch('LiceCrea', $scope.saveToLocal, true);
    $scope.isValid = () => $scope.LiceCrea.GUsername && $scope.LiceCrea.GRepository && $scope.LiceCrea.RBranch && $scope.LiceCrea.LName;
    $scope.getWebLink = () => $scope.isValid() ? "https://github.com/" + $scope.LiceCrea.GUsername + "/" + $scope.LiceCrea.GRepository + "/blob/" + $scope.LiceCrea.RBranch + "/" + $scope.LiceCrea.LName + ".properties" : null;
    $scope.getFilePath = () => $scope.isValid() ? $scope.LiceCrea.GUsername + "/" + $scope.LiceCrea.GRepository + "/" + $scope.LiceCrea.RBranch + "/" + $scope.LiceCrea.LName : null;
    $scope.getLink = link => $http.get(link).then(res => res.data).catch(err => Promise.reject(err));
    $scope.getLicenseKey = githubPath => $scope.getLink('https://anlavn-api.vercel.app/api/license/create?github=' + encodeURIComponent(githubPath));
    $scope.getLicenseContent = key => $scope.getLink('https://anlavn-api.vercel.app/api/license/check?key=' + encodeURIComponent(key));
    $scope.copyToClipboard = data => {
        navigator.clipboard.writeText(data);
        $scope.AddNotifis("Copy to clipboard successfully.", "success");
    }

    $scope.createLicenseKey = () => {
        new bootstrap.Modal(document.getElementById('modalCLK')).show(); 
        $scope.getLink(licenseExample).then(res => $scope.LicenseFile = res).catch(err => {
            $scope.AddNotifis("An error occurred while query the License file example. " + err.data, "danger");
        });
        $scope.getLicenseKey($scope.getFilePath()).then(res => $scope.gLicenseKey = res).catch(err => {
            $scope.AddNotifis("An error occurred while create the License Key. " + err.data.error, "danger");
        });
    }

    $scope.checkLicenseKey = key => {
        $scope.LicenseFile = "";
        new bootstrap.Modal(document.getElementById('modalCLF')).show(); 
        $scope.getLicenseContent(key).then(res => $scope.LicenseFile = res).catch(err => {
            $scope.AddNotifis("An error occurred while query your License file. " + err.data, "danger");
        })
    }

}]);